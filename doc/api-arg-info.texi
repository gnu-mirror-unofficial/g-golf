@c -*-texinfo-*-
@c This is part of the GNU G-Golf Reference Manual.
@c Copyright (C) 2016 - 2018 Free Software Foundation, Inc.
@c See the file g-golf.texi for copying conditions.


@defindex ai


@node Arg Info
@subsection Arg Info

G-Golf Arg Info low level API.@*
GIArgInfo â€” Struct representing an argument.


@subheading Procedures

@indentedblock
@table @code
@item @ref{g-arg-info-get-closure}
@end table
@end indentedblock


@subheading Types and Values

@indentedblock
@table @code
@item @ref{%gi-direction}
@item @ref{%gi-scope-type}
@item @ref{%gi-transfer}
@end table
@end indentedblock


@subheading Struct Hierarchy

@indentedblock
GIBaseInfo           	       @*
@ @ +--- GIArgInfo	       @*
@end indentedblock


@subheading Description

@code{GIArgInfo} represents an argument. An argument is always part of a
@code{GICallableInfo}.


@subheading Procedures

Note: in this section, the @var{info} argument is [must be] a pointer to
a @code{GIArgInfo}.


@anchor{g-arg-info-get-closure}
@deffn Procedure g-arg-info-get-closure info

Returns the index of the user data argument or -1 if there is none.

Obtain the index of the user data argument. This is only valid for
arguments which are callbacks.
@end deffn


@subheading Types and Values


@anchor{%gi-direction}
@defivar <gi-enum> %gi-direction

An instance of @code{<gi-enum>}, who's members are the scheme
representation of the direction of a @code{GIArgInfo}:

@indentedblock
@emph{gi-name}: GIDirection  @*
@emph{scm-name}: gi-direction  @*
@emph{enum-set}:
@indentedblock
@table @code
@item in
in argument.

@item out
out argument.

@item inout
in and out argument.
@end table
@end indentedblock
@end indentedblock
@end defivar


@anchor{%gi-scope-type}
@defivar <gi-enum> %gi-scope-type

An instance of @code{<gi-enum>}, who's members are the scheme
representation of the scope of a @code{GIArgInfo}. Scope type of a
@code{GIArgInfo} representing callback, determines how the callback is
invoked and is used to decide when the invoke structs can be freed.

@indentedblock
@emph{gi-name}: GIScopeType  @*
@emph{scm-name}: gi-scope-type  @*
@emph{enum-set}:
@indentedblock
@table @code
@item invalid
The argument is not of callback type.

@item call
The callback and associated user_data is only used during the call to
this function.

@item async
The callback and associated user_data is only used until the callback is
invoked, and the callback. is invoked always exactly once.

@item notified
The callback and and associated user_data is used until the caller is
notfied via the destroy_notify.
@end table
@end indentedblock
@end indentedblock
@end defivar


@anchor{%gi-transfer}
@defivar <gi-enum> %gi-transfer

The transfer is the exchange of data between two parts, from the callee
to the caller. The callee is either a function/method/signal or an
object/interface where a property is defined. The caller is the side
accessing a property or calling a function. @code{GITransfer} specifies
who's responsible for freeing the resources after the ownership transfer
is complete. In case of a containing type such as a list, an array or a
hash table the container itself is specified differently from the items
within the container itself. Each container is freed differently, check
the documentation for the types themselves for information on how to
free them.

An instance of @code{<gi-enum>}, who's members are the scheme
representation of the @code{GITransfer}:

@indentedblock
@emph{gi-name}: GITransfer  @*
@emph{scm-name}: gi-transfer  @*
@emph{enum-set}:
@indentedblock
@table @code
@item nothing
transfer nothing from the callee (function or the type instance the
property belongs to) to the caller. The callee retains the ownership of
the transfer and the caller doesn't need to do anything to free up the
resources of this transfer

@item container
transfer the container (list, array, hash table) from the callee to the
caller. The callee retains the ownership of the individual items in the
container and the caller has to free up the container resources
@code{g_list_free}, @code{g_hash_table_destroy}, @dots{} of this transfer

@item everything
transfer everything, eg the container and its contents from the callee
to the caller. This is the case when the callee creates a copy of all
the data it returns. The caller is responsible for cleaning up the
container and item resources of this transfer

@end table
@end indentedblock
@end indentedblock
@end defivar
